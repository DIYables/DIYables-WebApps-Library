#ifndef WEB_PLOTTER_HTML_H
#define WEB_PLOTTER_HTML_H

const char WEB_PLOTTER_HTML[] PROGMEM = R"HTMLDELIM(<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Real-time Data Plotter - DIYables WebApp</title><link rel="icon" href="https://diyables.io/images/page/diyables.svg"><style>*{margin:0;padding:0;box-sizing:border-box;}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:white;min-height:100vh;margin:0;padding:0 0 40px 0;display:flex;flex-direction:column;}.a{background:white;border-radius:0;box-shadow:none;width:100%;flex:1;max-width:1400px;margin:0 auto;padding:20px;text-align:center;display:flex;flex-direction:column;justify-content:flex-start;}.b{margin-top:20px;margin-bottom:30px;position:relative;}.b h1{font-size:2.0em;font-weight:700;color:#333;margin-bottom:10px;line-height:1.2;}.b p{font-size:1.1em;color:#666;margin-bottom:20px;}.c{background:#f8f9fa;padding:10px 20px;border-bottom:1px solid #e9ecef;margin:-20px -20px 0 -20px;display:flex;justify-content:space-between;align-items:center;}.d{color:#667eea;text-decoration:none;font-size:1.1em;font-weight:bold;transition:all 0.3s;padding:8px 12px;border-radius:6px;background:rgba(102,126,234,0.1);}.d:hover{background:rgba(102,126,234,0.2);transform:scale(1.05);}.e{color:#007bff;text-decoration:none;font-size:1.0em;font-weight:bold;transition:all 0.3s;padding:8px 12px;border-radius:6px;background:rgba(0,123,255,0.1);}.e:hover{background:rgba(0,123,255,0.2);transform:scale(1.05);}.f{background:#f8f9fa;padding:5px 20px;border-bottom:1px solid #e9ecef;margin:0 -20px 20px -20px;text-align:center;font-size:0.9em;color:black;}.f #connectionText{font-weight:bold;}.g{flex:1;display:flex;flex-direction:column;align-items:center;background:#f8f9fa;border-radius:12px;padding:20px;margin:20px 0;min-height:500px;}#graph{border:2px solid #dee2e6;border-radius:8px;background:white;box-shadow:0 2px 8px rgba(0,0,0,0.1);}.h{display:flex;gap:15px;margin-top:20px;justify-content:center;align-items:center;flex-wrap:wrap;}.i{display:flex;gap:20px;margin-top:15px;justify-content:center;align-items:center;flex-wrap:wrap;font-size:14px;color:#666;}.plot-info>span{background:white;padding:8px 12px;border-radius:6px;border:1px solid #dee2e6;}.i span span{background:none;padding:0;border-radius:0;border:none;color:#007bff;}.j{display:flex;gap:15px;margin-top:15px;justify-content:center;align-items:center;flex-wrap:wrap;}.k{display:flex;align-items:center;gap:8px;padding:6px 12px;background:white;border-radius:6px;border:1px solid #dee2e6;font-size:14px;}.l{width:12px;height:12px;border-radius:2px;}@media (max-width:768px){.a{padding:15px;}.b h1{font-size:1.6em;}.c{margin:-15px -15px 0 -15px;padding:10px 15px;}.f{margin:0 -15px 20px -15px;}.h{flex-direction:column;gap:10px;}.i{flex-direction:column;gap:10px;}.m{height:50px;padding:10px 15px;font-size:0.8em;}}.m{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;text-align:center;padding:15px 20px;width:100%;font-size:0.9em;border-top:1px solid rgba(255,255,255,0.1);position:fixed;bottom:0;left:0;z-index:1000;height:40px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;}.m a{color:white;text-decoration:none;font-weight:bold;transition:all 0.3s ease;}.m a:hover{color:rgba(255,255,255,0.8);text-decoration:underline;}</style></head><body><div class="a"><div class="c"><a href="/" class="d">üè† Home</a><a href="https://diyables.io/webapps-r4" class="e" target="_blank">üìö Tutorial</a></div><div class="f" id="websocketStatus">WebSocket: <span id="connectionText">Disconnected</span></div><div class="b"><h1 id="plotTitle">üìä Real-time Data Plotter</h1><p>Visualize your Arduino sensor data in real-time</p></div><div class="g"><canvas id="graph"></canvas><div class="i"><span>Samples: <span id="sampleCount">0</span></span><span>Data Lines: <span id="lineCount">0</span></span><span>Auto Scale: <span id="autoScaleStatus">Enabled</span></span></div><div class="j" id="legend"></div></div></div><script>var E="#FFFFFF";var F="#333333";var G="#666666";var H="#E9ECEF";var I=["#007BFF","#DC3545","#28A745","#FFC107","#6F42C1","#17A2B8","#FD7E14","#20C997"];var J=12;var K=40;var L=40;var M=40;var N=60;var O=30;var P=30;var Q=5;var R=4;var S=1;var T=800;var U=400;var V=50;var W=0;var X=V;var Y=1;var Z=-5;var a0=5;var a1="Samples";var a2="Values";var a3="Arduino-Web Plotter";var a4;var a5;var a6;var a7;var a8=0;var a9="";var b0=[];var b1;var b2;var b3;function o(){b2=document.getElementById("graph");b2.style.backgroundColor=E;b3=b2.getContext("2d");C();setInterval(z,1000/30);setTimeout(()=>{if(!b1){p();}},1000);}function p(){try{b1=new WebSocket("ws://"+window.location.host+":81");r("connecting");b1.onopen=function(){r("connected");b1.send("PLOTTER:GET_CONFIG");};b1.onclose=function(){r("disconnected");b1=null;setTimeout(()=>{if(!b1){p();}},3000);};b1.onmessage=function(e){s(e.data);};b1.onerror=function(b4){console.error("WebSocket b4:",b4);r("disconnected");};}catch(b4){console.error("Failed to p:",b4);r("disconnected");}}function q(){if(b1){b1.close();}}function r(b5){const b6=document.getElementById('connectionText');b6.textContent=b5;console.log('WebSocket '+b5);if(b5=='connected')b6.style.color='#007bff';else if(b5=='connecting')b6.style.color='#6c757d';else b6.style.color='#dc3545';}function s(b7){console.log("Received:",b7);if(b7.startsWith("PLOTTER_DATA:")){const b8=b7.substring(13);t(b8);}else if(b7.startsWith("PLOTTER_CONFIG:")){const b9=b7.substring(15);u(b9);}}function t(b8){a9+=b8+"\n";while(a9.indexOf("\n")>0){const c0=a9.indexOf("\n");const c1=a9.substring(0,c0).trim();a9=a9.substring(c0+1);if(c1.length===0) continue;const c2=[];const c3=c1.split(/[\s\t]+/);for(let i=0;i<c3.length;i++){const c4=parseFloat(c3[i]);if(!isNaN(c4)){c2.push(c4);}}if(c2.length===0) continue;for(let i=0;i<c2.length;i++){if(i>=b0.length){b0.push([]);}b0[i].push(c2[i]);}a8++;for(let c1=0;c1<b0.length;c1++){while(b0[c1].length>V){b0[c1].shift();}}if(Y){D();}v();}}function u(b9){const c3=b9.split("|");if(c3.length>=7){a3=c3[0];a1=c3[1];a2=c3[2];Z=parseFloat(c3[3]);a0=parseFloat(c3[4]);Y=parseInt(c3[5]);V=parseInt(c3[6]);C();v();}}function v(){document.getElementById("plotTitle").textContent="üìä "+a3;document.getElementById("sampleCount").textContent=a8;document.getElementById("lineCount").textContent=b0.length;document.getElementById("autoScaleStatus").textContent=Y?"Enabled":"Disabled";w();}function w(){const c5=document.getElementById("legend");c5.innerHTML="";for(let i=0;i<b0.length;i++){const c6=document.createElement("div");c6.className="k";const c7=document.createElement("div");c7.className="l";c7.style.backgroundColor=I[i%I.length];const c8=document.createElement("span");c8.textContent=`Data ${i+1}`;c6.appendChild(c7);c6.appendChild(c8);c5.appendChild(c6);}}function y(x,c9,d0,d1,d2){return(x-c9)*(d2-d1)/(d0-c9)+d1;}function z(){if(a8<=V){X=Math.max(a8,10);}else{X=V;}b3.clearRect(0,0,T,U);b3.save();b3.translate(a6,a7);A();B();b3.restore();}function A(){b3.font="14px Arial";b3.textBaseline="middle";b3.textAlign="center";b3.fillStyle=F;if(a1!==""){b3.fillText(a1,a4/2,M+K/2);}if(a2!==""){b3.save();b3.rotate(-90*Math.PI/180);b3.fillText(a2,a5/2,-N-L/2);b3.restore();}b3.font="12px Arial";b3.strokeStyle=G;b3.lineWidth=1;b3.textAlign="right";for(let i=0;i<=R;i++){const d3=-y(i,0,R,0,a5);const d4=Math.round(d3)+0.5;b3.strokeStyle=H;b3.beginPath();b3.moveTo(0,d4);b3.lineTo(a4,d4);b3.stroke();b3.strokeStyle=G;b3.beginPath();b3.moveTo(-7,d4);b3.lineTo(4,d4);b3.stroke();const d5=y(i,0,R,Z,a0);b3.fillStyle=F;b3.fillText(d5.toFixed(1),-15,d4);}b3.textAlign="center";for(let i=0;i<=Q;i++){const d6=y(i,0,Q,0,a4);const d7=Math.round(d6)+0.5;b3.strokeStyle=H;b3.beginPath();b3.moveTo(d7,0);b3.lineTo(d7,-a5);b3.stroke();b3.strokeStyle=G;b3.beginPath();b3.moveTo(d7,7);b3.lineTo(d7,-4);b3.stroke();let d8;if(a8<=V){d8=y(i,0,Q,W,X);}else{d8=y(i,0,Q,a8-V,a8);}b3.fillStyle=F;b3.fillText(Math.round(d8).toString(),d7,M/2+5);}b3.strokeStyle=G;b3.lineWidth=2;b3.beginPath();b3.moveTo(0,0);b3.lineTo(a4,0);b3.moveTo(0,0);b3.lineTo(0,-a5);b3.stroke();}function B(){b3.lineWidth=2;for(let c1=0;c1<b0.length;c1++){const d9=b0[c1];if(d9.length<2) continue;b3.strokeStyle=I[c1%I.length];b3.beginPath();for(let i=0;i<d9.length;i++){const e0=y(i,0,Math.max(d9.length-1,1),0,a4);const e1=-y(d9[i],Z,a0,0,a5);if(i===0){b3.moveTo(e0,e1);}else{b3.lineTo(e0,e1);}}b3.stroke();}}function C(){const e2=window.pageYOffset||document.documentElement.scrollTop;if(S){const e3=b2.parentElement;const e4=e3.getBoundingClientRect();T=Math.min(e4.width-40,1200);U=Math.min(window.innerHeight*0.6,500);}b2.width=T;b2.height=U;b3.font="12px Arial";const e5=b3.measureText(Z.toFixed(1)).width;const e6=b3.measureText(a0.toFixed(1)).width;N=Math.max(e5,e6)+20;a4=T-N-P;a5=U-M-O;a6=N;a7=U-M;if(a1!==""){a5-=K;a7-=K;}if(a2!==""){a4-=L;a6+=L;}b3.lineWidth=1;}function D(){if(b0.length===0) return;let e7=[];for(let i=0;i<b0.length;i++){e7=e7.concat(b0[i]);}if(e7.length===0) return;const e8=Math.max(...e7);const e9=Math.min(...e7);const f0=2.0;let f1=e8-e9;if(f1<f0){const f2=(e8+e9)/2;a0=f2+f0/2;Z=f2-f0/2;}else{const f3=f1*0.1;a0=e8+f3;Z=e9-f3;}C();}window.onload=o;window.onresize=C;</script><div class="m">Created by&nbsp;<a href="https://diyables.io/" target="_blank">DIYables</a></div></body></html>)HTMLDELIM";

#endif
